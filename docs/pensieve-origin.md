# McDonald's Optimizer — 決策紀錄

- date: 2026-02-27
- source: Pensieve 討論

---

## 問題

麥當勞有單點、套餐、1+1、甜心卡、APP 優惠等多種定價機制，手動比價很痛苦。
需要一個系統：輸入想吃的品項 + 數量 → 輸出最便宜的點餐組合。

## 關鍵設計決策

### 兩層最佳化
1. **精確覆蓋**：滿足所有需求的最低價方案
2. **邊際升級**：在門檻內，多花一點能多拿什麼
   - 門檻：基準價 ≤130 → 定額（~50），>130 → 百分比（~30%）

### 演算法
- MVP 用暴力窮舉（品項 ~100、優惠 ~20-30，搜尋空間小）
- 未來如果規則太多再換 ILP（PuLP / OR-Tools）

### 甜心卡邏輯
- 買 A 群原價，送 B 群一個
- **雙向適用**：使用者要的東西在 B 群也要能觸發（找 A 群最適合的搭配）
- 不自動挑最便宜的 A 群品項 — 列出選項讓使用者自己選

### 資料更新
- 來源：爬 cpok.tw（已確認表格結構良好，pandas.read_html 可直接解析）
- 24 個 HTML tables，大部分是乾淨的品項×價格矩陣
- 需要特別處理：1+1 分區資料（塞在單一 cell）、午茶時光

### Tech Stack
- Backend: FastAPI (Python) — 方便做最佳化 + 未來換 ILP
- Frontend: Web app (TBD)
- Data: YAML 檔，由爬蟲產生
